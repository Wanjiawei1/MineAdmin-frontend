import{u as p}from"./useMessage-BpWl7_QK.js";import{d as u,r as m}from"./user-DRXzZXp8.js";import{bb as b,b as l,e as f,aQ as i,b7 as d,bg as y,I as g}from"./index-fEaXY3hb.js";import"./useTrans-BxQFVQVs.js";import"./__commonjsHelpers__-Cpj98o6Y.js";const h="/static/jpg/defaultAvatar-CTeocs1F.jpg";function c(t){return typeof t=="function"||Object.prototype.toString.call(t)==="[object Object]"&&!g(t)}function T(t,C,s){const r=b(),o=p(),n=(e,a)=>y(e)&&a.id!==1;return[{type:"selection",showOverflowTooltip:!1,label:()=>s("crud.selection"),cellRender:({row:e})=>e.id===1?"-":void 0,selectable:e=>![1].includes(e.id)},{type:"index"},{label:()=>s("baseUserManage.avatar"),prop:"avatar",width:"120px",cellRender:({row:e})=>l("div",{class:"flex-center"},[l(f("el-avatar"),{src:e.avatar===""||!e.avatar?h:e.avatar,alt:e.username},null)])},{label:()=>s("baseUserManage.username"),prop:"username"},{label:()=>s("baseUserManage.nickname"),prop:"nickname"},{label:()=>s("baseUserManage.userType"),prop:"user_type",cellRender:({row:e})=>{let a;return l(i,{type:r.t("base-userType",e.user_type,"color")},c(a=s(r.t("base-userType",e.user_type,"i18n")))?a:{default:()=>[a]})}},{label:()=>s("baseUserManage.phone"),prop:"phone"},{label:()=>s("baseUserManage.email"),prop:"email"},{label:()=>s("crud.status"),prop:"status",cellRender:({row:e})=>{let a;return l(i,{type:r.t("system-status",e.status,"color")},c(a=s(r.t("system-status",e.status,"i18n")))?a:{default:()=>[a]})}},{type:"operation",label:()=>s("crud.operation"),operationConfigure:{actions:[{name:"edit",icon:"material-symbols:person-edit",show:({row:e})=>n("permission:user:update",e),text:()=>s("crud.edit"),onClick:({row:e})=>{t.setTitle(s("crud.edit")),t.open({formType:"edit",data:e})}},{name:"del",show:({row:e})=>n("permission:user:delete",e),icon:"mdi:delete",text:()=>s("crud.delete"),onClick:({row:e},a)=>{o.delConfirm(s("crud.delDataMessage")).then(async()=>{(await u([e.id])).code===d.SUCCESS&&(o.success(s("crud.delSuccess")),a.refresh())})}},{name:"setRole",show:({row:e})=>n(["permission:user:getRole","permission:user:setRole"],e),icon:"material-symbols:person-add-rounded",text:()=>s("baseUserManage.setRole"),onClick:({row:e})=>{t.setTitle(s("baseUserManage.setRole")),t.open({formType:"setRole",data:e})}},{name:"initPassword",show:({row:e})=>n("permission:user:password",e),icon:"material-symbols:passkey",text:()=>s("baseUserManage.initPassword"),onClick:({row:e})=>{o.confirm(s("baseUserManage.setPassword")).then(async()=>{(await m(e.id)).code===d.SUCCESS&&o.success(s("baseUserManage.setPasswordSuccess"))})}},{name:"noAllowSuperAdmin",show:({row:e})=>e.id===1,disabled:()=>!0,text:()=>s("crud.superAdminNoEdit")}]}}]}export{T as default};
