import{o as N,g as S,d as F,au as $,r as w,i as U,V,a as W,c as _,w as z,v as q,b as i,aT as G,m as x,av as J,aU as K,aV as Q,F as P,I as X,aW as Y}from"./index-fEaXY3hb.js";const I=F({name:"MaTable",props:{options:{type:Object,default:()=>({})},columns:{type:Array,default:()=>[]}},directives:{Loading:$},emits:["set-data-callback"],setup(r,{slots:n,attrs:d,emit:p,expose:b}){const a=w(r.options),v=w(r.columns),R=U("MaTableOptions"),y=w(!1),j=w(),g=()=>{const{adaptionOffsetBottom:l}=a.value,e=window.innerHeight-(l??70);a.value.height=`${e}px`};N(async()=>{y.value=!0}),V(()=>{var l;return(l=a.value)==null?void 0:l.adaption},l=>{l&&(window.addEventListener("resize",g),g())},{immediate:!0}),V(()=>{var l;return(l=a.value)==null?void 0:l.adaptionOffsetBottom},()=>{var l;(l=a.value)!=null&&l.adaption&&g()},{immediate:!0}),W(()=>{y.value=!1,window.removeEventListener("resize",g)});const k=_(()=>{var l,e;const{pagination:o}=a.value;return z(i("div",{className:"mineadmin-pagination"},[i("div",{class:"mineadmin-pagination-left"},[(l=n==null?void 0:n.pageLeft)==null?void 0:l.call(n)]),(((e=a.value)==null?void 0:e.showPagination)??!1)&&o&&i("div",{class:"mineadmin-el-page"},[i(G,x({total:0,onChange:()=>{}},o,{size:(o==null?void 0:o.size)??"default",pagerCount:(o==null?void 0:o.pagerCount)??5,layout:(o==null?void 0:o.layout)??"total, prev, pager, next, sizes, jumper"}),null)])]),[[q,n.pageLeft||o]])}),T=(l,e)=>{var o,t,A,B;if(l!=null&&l.hide&&(l==null?void 0:l.hide)instanceof Function&&l.hide(d)||l!=null&&l.hide&&typeof(l==null?void 0:l.hide)=="boolean"&&l.hide)return;const O=typeof l.prop=="function"?l.prop(e):l.prop;let f={default:u=>{var s,c,m;return((s=l==null?void 0:l.cellRender)==null?void 0:s.call(l,Object.assign(u,{options:a.value,attrs:d})))??((c=n==null?void 0:n[`column-${O}`])==null?void 0:c.call(n,u))??((m=n==null?void 0:n.default)==null?void 0:m.call(n,u))},header:u=>{var s,c,m;return((s=l==null?void 0:l.headerRender)==null?void 0:s.call(l,Object.assign(u,{options:a.value,attrs:d})))??((c=n==null?void 0:n[`header-${O}`])==null?void 0:c.call(n,u))??((m=n==null?void 0:n.header)==null?void 0:m.call(n,u))},filterIcon:u=>{var s;return(s=n==null?void 0:n.filterIcon)==null?void 0:s.call(n,u)}};const{label:C,prop:Z,children:h,cellRender:ll,headerRender:el,...H}=l;return h&&h.length>0&&(f.default=()=>h==null?void 0:h.map(T)),i(Y,x({key:e},H,{label:typeof C=="function"?C():C,prop:O,align:(l==null?void 0:l.align)??((o=a.value)==null?void 0:o.columnAlign)??"center",headerAlign:(l==null?void 0:l.align)??((t=a.value)==null?void 0:t.columnAlign)??(l==null?void 0:l.headerAlign)??((A=a.value)==null?void 0:A.headerAlign)??"center",showOverflowTooltip:(l==null?void 0:l.showOverflowTooltip)??((B=a.value)==null?void 0:B.showOverflowTooltip)??!0}),typeof(L=f)=="function"||Object.prototype.toString.call(L)==="[object Object]"&&!X(L)?f:{default:()=>[f]});var L},D=()=>{const{on:l,pagination:e,...o}=a.value;return i(P,null,[i(K,x({ref:j},l,o,d),{default:()=>{var t;return[i(P,null,[(t=v.value)==null?void 0:t.map(T)])]},append:()=>{var t;return(t=n.append)==null?void 0:t.call(n)},empty:()=>{var t;return((t=n.empty)==null?void 0:t.call(n))??i(Q,null,null)}}),k.value])},E=()=>{const{loading:l,loadingConfig:e,height:o,maxHeight:t}=a.value;return z(i("div",{className:"mineadmin-table","element-loading-svg":(e==null?void 0:e.svg)??'<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 1024 1024"><path fill="currentColor" d="M512 64a32 32 0 0 1 32 32v192a32 32 0 0 1-64 0V96a32 32 0 0 1 32-32m0 640a32 32 0 0 1 32 32v192a32 32 0 1 1-64 0V736a32 32 0 0 1 32-32m448-192a32 32 0 0 1-32 32H736a32 32 0 1 1 0-64h192a32 32 0 0 1 32 32m-640 0a32 32 0 0 1-32 32H96a32 32 0 0 1 0-64h192a32 32 0 0 1 32 32M195.2 195.2a32 32 0 0 1 45.248 0L376.32 331.008a32 32 0 0 1-45.248 45.248L195.2 240.448a32 32 0 0 1 0-45.248m452.544 452.544a32 32 0 0 1 45.248 0L828.8 783.552a32 32 0 0 1-45.248 45.248L647.744 692.992a32 32 0 0 1 0-45.248M828.8 195.264a32 32 0 0 1 0 45.184L692.992 376.32a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0m-452.544 452.48a32 32 0 0 1 0 45.248L240.448 828.8a32 32 0 0 1-45.248-45.248l135.808-135.808a32 32 0 0 1 45.248 0"/></svg>',"element-loading-svg-view-box":(e==null?void 0:e.viewBox)??"-9, -9, 50, 50","element-loading-text":(e==null?void 0:e.text)??null,"element-loading-spinner":(e==null?void 0:e.spinner)??null,"element-loading-background":(e==null?void 0:e.spinner)??null,"element-loading-custom-class":(e==null?void 0:e.customClass)??null},[D()]),[[J("loading"),l]])},M=l=>v.value=l;return b({setData:l=>{a.value.data=l,p("set-data-callback",l)},setPagination:l=>{var e;return a.value.pagination=Object.assign(((e=a.value)==null?void 0:e.pagination)??{},l)},setLoadingState:l=>a.value.loading=l,setOptions:l=>a.value=Object.assign(a.value,l),getOptions:()=>a.value,setColumns:M,getColumns:()=>v.value,appendColumn:l=>v.value.push(l),removeColumn:l=>M(v.value.filter((e,o)=>(typeof e.prop=="function"?e.prop(o):e.prop)!==l)),getColumnByProp:l=>{var e;return((e=v.value.filter((o,t)=>(typeof o.prop=="function"?o.prop(t):o.prop)===l))==null?void 0:e[0])??null},getElTableRef:()=>j.value}),()=>R.ssr?y.value&&E():E()}});function al(r){return new Promise(async(n,d)=>{const p=S();N(async()=>{if(p&&p.refs[r]){const b=p.refs[r];n({...b})}else d("[@mineadmin/table]: not found ref for ma-table component")})})}const ol={install(r,n){r.component(I.name,I),r.provide("MaTableOptions",n??{ssr:!1})}};export{al as l,ol as o};
