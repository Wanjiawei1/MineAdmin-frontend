import{c,s as p}from"./role-2UO_91S_.js";import v from"./getFormItems-DRUHFn0u.js";import{u as C}from"./useForm-Dr9zNnRS.js";import{d as h,r as n,e as F,aj as S,h as b,O as T,ab as x,b7 as s}from"./index-BsGhlh_X.js";import{u as y}from"./useTrans-kmCwB86_.js";const w=h({name:"permission:user:form",__name:"form",props:{formType:{default:"add"},data:{default:null}},setup(m,{expose:u}){const l=y().globalTrans,r=n(),o=n({});C("userForm").then(t=>{m.formType==="edit"&&m.data&&Object.keys(m.data).map(a=>{o.value[a]=m.data[a]}),t.setItems(v(m.formType,l,o.value)),t.setOptions({labelWidth:"80px"})});function d(){return new Promise((t,a)=>{c(o.value).then(e=>{e.code===s.SUCCESS?t(e):a(e)}).catch(e=>{a(e)})})}function f(){return new Promise((t,a)=>{p(o.value.id,o.value).then(e=>{e.code===s.SUCCESS?t(e):a(e)}).catch(e=>{a(e)})})}return u({add:d,edit:f,maForm:r}),(t,a)=>{const e=F("ma-form");return b(),S(e,{ref_key:"userForm",ref:r,modelValue:T(o),"onUpdate:modelValue":a[0]||(a[0]=i=>x(o)?o.value=i:null)},null,8,["modelValue"])}}});export{w as _};
