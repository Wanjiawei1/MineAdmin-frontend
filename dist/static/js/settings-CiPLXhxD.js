import{d as B,r as b,y as F,C as L,c as U,b as e,e as o,B as E,G as I,l as v,n as D,H as O,F as m,I as j}from"./index-fEaXY3hb.js";import{u as z}from"./useSortable-CDpFPQIH.js";import{u as _}from"./useGlobal-BBZzDt4J.js";import{u as s}from"./useTrans-BxQFVQVs.js";import"./__commonjsHelpers__-Cpj98o6Y.js";function G(d){return typeof d=="function"||Object.prototype.toString.call(d)==="[object Object]"&&!j(d)}const J=B({name:"settings",setup(){var f,A;const d=b(!1),a=F(),g=_().$toolbars,p=b({colorMode:(f=a.getSettings("app"))==null?void 0:f.colorMode,tabMode:(A=a.getSettings("tabbar"))==null?void 0:A.mode}),y=b(null),{t:x}=L(),S=U(()=>{const t=a.getSettings("toolBars")||[];return g.toolbars.value.map(l=>{const i=t.find(n=>n.name===l.name);return{...l,show:i?i.show:l.show}})}),r=t=>e("div",{class:"relative my-5 h-6 flex items-center"},[e("div",{class:"h-[1px] w-full bg-gray-2 dark:bg-dark-1"},null),e("div",{class:"absolute left-1/2 bg-white px-3 text-[14px] text-gray-8 -top-[-1px] -translate-x-1/2 dark-bg-dark-5 dark-text-gray-1"},[t])]),h=(t,l,i,n="h-8 text-sm")=>e(o("m-tabs"),{class:n,modelValue:p.value[t],"onUpdate:modelValue":u=>p.value[t]=u,options:l,onChange:u=>i(u)},null),k=()=>h("colorMode",[{icon:"material-symbols:sunny-outline-rounded",label:s("mineAdmin.settings.colorModes.light"),value:"light"},{icon:"material-symbols:dark-mode-outline",label:s("mineAdmin.settings.colorModes.dark"),value:"dark"},{icon:"lets-icons:color-mode-light",label:s("mineAdmin.settings.colorModes.system"),value:"autoMode"}],async t=>await a.toggleColorMode(t)),C=()=>e(m,null,[["#3790ff","#EF4444","#2563EB","#A855F7","#15803D","#EAB308","#EC4899","#F97316","#10B981","#F59E0B","#F43F5E","#549f08","#0C0A09"].map(l=>e("li",{style:`background-color:${l}`,onClick:()=>{O().setThemeColor(l),a.getSettings("app").primaryColor=l}},[a.getSettings("app").primaryColor===l&&e(v,{class:"icon",name:"i-material-symbols:check-small"},null)]))]),M=()=>e("div",{class:"mine-layout-setting"},[e(o("m-tooltip"),{text:s("mineAdmin.settings.layouts.classic")},{default:()=>[e("div",{class:{classic:!0,"mine-selected-layout":a.isClassicLayout()},onClick:()=>a.getSettings("app").layout="classic"},[e("div",{class:"h-full w-[25%] rounded-l bg-[rgb(var(--ui-primary))]"},null),e("div",{class:"h-full w-[75%] rounded-r bg-[rgb(var(--ui-primary)/40%)]"},null)])]}),e(o("m-tooltip"),{text:s("mineAdmin.settings.layouts.columns")},{default:()=>[e("div",{class:{columns:!0,"mine-selected-layout":a.isColumnsLayout()},onClick:()=>a.getSettings("app").layout="columns"},[e("div",{class:"h-full w-[10%] rounded-l bg-[rgb(var(--ui-primary))]"},null),e("div",{class:"h-full w-[20%] bg-[rgb(var(--ui-primary)/40%)]"},null),e("div",{class:"h-full w-[70%] rounded-r bg-[rgb(var(--ui-primary)/15%)]"},null)])]}),e(o("m-tooltip"),{text:s("mineAdmin.settings.layouts.mixed")},{default:()=>[e("div",{class:{mixed:!0,"mine-selected-layout":a.isMixedLayout()},onClick:()=>a.getSettings("app").layout="mixed"},[e("div",{class:"h-full w-full flex flex-col gap-y-0.5"},[e("div",{class:"h-[15%] w-full rounded-t bg-[rgb(var(--ui-primary))]"},null),e("div",{class:"h-[85%] w-full flex gap-x-0.5"},[e("div",{class:"h-full w-[20%] rounded-l rounded-t-none bg-[rgb(var(--ui-primary)/40%)]"},null),e("div",{class:"h-full w-[80%] rounded-r rounded-t-none bg-[rgb(var(--ui-primary)/15%)]"},null)])])])]})]),c=(t,l)=>{const i=a.getSettings(t);return e(m,null,[l.map(n=>e("div",{class:"mine-setting-description"},[e("div",{class:"desc-label"},[n.label]),e("div",{class:"desc-value"},[e(o("m-switch"),{modelValue:i[n.value],"onUpdate:modelValue":u=>i[n.value]=u,onChange:u=>{var w;return(w=n==null?void 0:n.change)==null?void 0:w.call(n,u)}},null)])]))])},R=()=>e(m,null,[c("tabbar",[{label:s("mineAdmin.settings.tabbars.enable"),value:"enable"}]),e("div",{class:"mine-setting-description"},[e("div",{class:"desc-label"},[s("mineAdmin.settings.tabbars.mode")]),e("div",{class:"desc-value"},[h("tabMode",[{label:s("mineAdmin.settings.tabbars.modeDefault"),value:"rectangle"},{label:s("mineAdmin.settings.tabbars.modeCard"),value:"card"}],t=>a.getSettings("tabbar").mode=t,"h-6 text-[12px]")])])]),T=()=>e(m,null,[S.value.map(t=>e("div",{class:"mine-setting-description"},[e("div",{class:"desc-label"},[s(t.title)]),e("div",{class:"desc-value"},[e(o("m-switch"),{modelValue:t.show,"onUpdate:modelValue":[l=>t.show=l,l=>{a.setToolBar(t.name,l)}],disabled:t.name==="settings"},null)])])),e("div",{class:"mt-3 flex items-center justify-between rounded p-2 ring-2 ring-[rgb(var(--ui-primary))]"},[e("div",{class:"text-sm"},[s("mineAdmin.toolbars.sorts")]),e("div",{class:"flex items-center gap-x-3",ref:y},[g.getShowToolbar().map(t=>e(v,{name:t.icon,size:20,class:"cursor-e-resize"},null))])])]),V=()=>{const t=a.getSettings("copyright"),l=[{label:s("mineAdmin.settings.copyRights.date"),value:"dates"},{label:s("mineAdmin.settings.copyRights.company"),value:"company"},{label:s("mineAdmin.settings.copyRights.website"),value:"website"},{label:s("mineAdmin.settings.copyRights.putOnRecord"),value:"putOnRecord"}];return e(m,null,[c("copyright",[{label:s("mineAdmin.settings.copyRights.enable"),value:"enable"}]),l.map(i=>e("div",{class:"mine-setting-description"},[e("div",{class:"desc-label !w-6/12"},[i.label]),e("div",{class:"desc-value !w-6/12"},[e(o("m-input"),{class:"mb-1 !h-6 !py-1",modelValue:t[i.value],"onUpdate:modelValue":n=>t[i.value]=n,onInput:n=>{t[i.value]=n.target.value}},null)])]))])};return()=>e("div",{class:"flex items-center"},[e(o("m-drawer"),{modelValue:d.value,"onUpdate:modelValue":t=>d.value=t,contentClass:"w-380px",title:s("mineAdmin.settings.title")},{trigger:()=>e(v,{class:"tool-icon animate-spin animate-duration-[5s]",name:"heroicons:cog-solid",size:20,onClick:async()=>{d.value=!0,await D(),z(y,g.toolbars,{animation:300})}},null),default:()=>e("div",{class:"pb-10"},[r(s("mineAdmin.settings.colorMode")),e("div",{class:"mx-auto mt-3 w-[70%]"},[k()]),p.value.colorMode!=="dark"&&c("app",[{label:s("mineAdmin.settings.asideDark"),value:"asideDark",change:t=>a.setAsideDark(t)}]),r(s("mineAdmin.settings.primaryColorSetting")),e("ul",{class:"mine-setting-color-list"},[C()]),r(s("mineAdmin.settings.layoutSetting")),M(),r(s("mineAdmin.settings.mainAsideSetting")),c("mainAside",[{label:s("mineAdmin.settings.mainAsides.mainMenuTitle"),value:"showTitle"},{label:s("mineAdmin.settings.mainAsides.autoToFirstMenu"),value:"enableOpenFirstRoute"}]),r(s("mineAdmin.settings.tabBarSettings")),R(),r(s("mineAdmin.settings.toolBarSettings")),g.state&&T(),r(s("mineAdmin.settings.copyRightSettings")),V(),r(s("mineAdmin.settings.otherSettings")),c("app",[{label:s("mineAdmin.settings.enableBreadcrumb"),value:"showBreadcrumb"},{label:s("mineAdmin.settings.enableWatermark"),value:"enableWatermark"}]),e("div",{class:"mine-setting-description"},[e("div",{class:"desc-label !w-6/12"},[s("mineAdmin.settings.watermarkText")]),e("div",{class:"desc-value !w-6/12"},[e(o("m-input"),{class:"mb-1 !h-6 !py-1",modelValue:a.getSettings("app").watermarkText,"onUpdate:modelValue":t=>a.getSettings("app").watermarkText=t,onInput:t=>{const l=t.target.value;a.getSettings("app").watermarkText=l.includes(",")?l.split(","):l,a.openGlobalWatermark()}},null)])])]),footer:()=>{let t;return e(o("m-button"),{class:"block w-full !py-2",onClick:()=>{E().saveSettingToSever(),I.success(x("mineAdmin.common.saveSuccess"),{zIndex:9999})}},G(t=s("mineAdmin.settings.save"))?t:{default:()=>[t]})}})])}});export{J as default};
